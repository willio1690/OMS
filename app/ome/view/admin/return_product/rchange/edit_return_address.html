<!--
  Copyright © ShopeX （http://www.shopex.cn）. All rights reserved.
  See LICENSE file for license details.
-->

<form action="index.php?app=ome&ctl=admin_return_rchange&act=doEditReturnAddress&p[0]=<{$reship_id}>&finder_id=<{$env.get.finder_id}>" method="post" id="from-select">
<input type="hidden" name="reship_id" value="<{$reshipInfo.reship_id}>">
<table width="100%" cellspacing="0" cellpadding="0" border="0" >
    <tbody>
        <tr>
            <th>&nbsp;</th>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <th width="100" align="right" style="width:100px; text-align:right; font-size:14px;"><em class="c-red">*</em> 省 市 区：&nbsp;</th>
            <td align="left"><{input type='region' app='eccommon' name="reship_area" value=$shop.area vtype="area" }></td>
        </tr>
        <tr>
            <th>&nbsp;</th>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table>

<div class="table-action">
	<{button label="确定" type="button" id="btn-submit" class="btn-primary"}> &nbsp; &nbsp;
	<{button label="关闭" type="button" id="btn-close" class="btn-primary"}>
</div>
</form>
<script>
$('btn-submit').addEvent('click', function()
{
    var reship_id = '<{$reship_id}>';
    new Request({url:'index.php?app=ome&ctl=admin_return_rchange&act=doEditReturnAddress&p[0]='+reship_id, 
        method:'POST',
        onRequest:function(){
            $('btn-submit').set('disabled', 'true');
            $('btn-submit').getElements('span')[1].set('text','正在修改中...');
        },
        onComplete:function(json)
        {
            $('from-select').fireEvent('submit',{stop:function(){}});
        },
    }).send();
});

$('btn-close').addEvent('click', function(){
    this.getParent('.dialog').retrieve('instance').close();
});

$('from-select').store('target',{
    onComplete:function(){
        try{
            var _dialogIns = $('btn-submit').getParent('.dialog').retrieve('instance');
        }catch(e){}

        if(_dialogIns){
            _dialogIns.close();
        }
    }
});
</script>