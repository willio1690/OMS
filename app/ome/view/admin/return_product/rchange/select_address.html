<!--
  Copyright © ShopeX （http://www.shopex.cn）. All rights reserved.
  See LICENSE file for license details.
-->

<form action="index.php?app=ome&ctl=admin_return_rchange&act=do_select_address&p[0]=<{$reship_id}>&finder_id=<{$env.get.finder_id}>" method="post" id="from-select">
<input type="hidden" name="reship_id" value="<{$reship_id}>">
<div style="font-size:14px;font-weight:bold;">确定要查询寄件地址<{$reship_bn}>?</div>
<div style="color:red;font-size:12px;padding-top:5px;">温馨提示：同步京东云交易创建退货申请单成功后，一般要等几个小时后，才能拉取到寄件地址。</div>
<br><br>
    <div class="table-action">
      <{button label="确定" type="button" id="btn-submit" class="btn-primary"}> &nbsp; &nbsp;
      <{button label="关闭" type="button" id="btn-close" class="btn-primary"}>
</div>
</form>
<script>
$('btn-submit').addEvent('click', function()
{
    var reship_id = '<{$reship_id}>';
    new Request({url:'index.php?app=ome&ctl=admin_return_rchange&act=do_select_address&p[0]='+reship_id, 
        method:'POST',
        onRequest:function(){
            $('btn-submit').set('disabled', 'true');
            $('btn-submit').getElements('span')[1].set('text','正在查询...');
        },
        onComplete:function(json)
        {
            $('from-select').fireEvent('submit',{stop:function(){}});
        },
    }).send();
});

$('btn-close').addEvent('click', function(){
    this.getParent('.dialog').retrieve('instance').close();
});

$('from-select').store('target',{
    onComplete:function(){
        try{
            var _dialogIns = $('btn-submit').getParent('.dialog').retrieve('instance');
        }catch(e){}

        if(_dialogIns){
            _dialogIns.close();
        }
    }
});
</script>