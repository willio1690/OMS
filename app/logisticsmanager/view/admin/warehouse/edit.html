<!--
  Copyright © ShopeX （http://www.shopex.cn）. All rights reserved.
  See LICENSE file for license details.
-->

<form action="index.php?app=logisticsmanager&ctl=admin_warehouse&act=doEdit&finder_id=<{$finder_id}>" method="post" id="area_add_form"  class="tableform">
<div class="division">
        <table width="100%" cellspacing="0" cellpadding="0" border="0" align="center" >
        <tbody>
            <tr>
                <th>区域仓名称:</th> 
                <td>

                   <input type="text" name="warehouse_name" value="<{$warehouse.warehouse_name}>" vtype="required">
                </td>
            </tr>
            <tr>
                <th>
                   库存预警值:
                </th> 
                <td>
                  <input type="text" name="warn_num" vtype="required&&number" value='<{$warehouse.warn_num}>'>
                </td>
            </tr>
            <tr>
                <th>
                    区域仓覆盖范围:
                </th>
                <td>
                    <{input type="address" id='p_region_id' name="p_region_id" disabled="1" data=$warehouse.region_ids }>
                </td>
            </tr>
            
        </tbody>
        </table>
    </div>


<div class="table-action">
      <{button label="确定" class="btn-primary" type='submit' id='save_area'}> &nbsp; &nbsp;
      <{button label="关闭" class="btn-secondary" isCloseDialogBtn="true"}>
    </div>
<input type='hidden' id='finder_id' name='finder_id' value='<{$finder_id}>'>
<input type='hidden' name='id' value='<{$warehouse.id}>'>
</form>
<script>

$('save_area').addEvent('click',function(e){
var form=this.getParent('form');
var _this=this;

form.store('target',{

    onComplete:function(jsontext){

  var json = Json.evaluate(jsontext);
    if (typeof(json.error) != 'undefined'){
        this.disabled=false;
    }else{
        finderGroup['<{$env.get.finder_id}>'].refresh.delay(400,finderGroup['<{$env.get.finder_id}>']);
        $('area_add_form').getParent('.dialog').retrieve('instance').close();

    }
    
    }
  });

form.fireEvent('submit',e);

});

</script>
