<!--
  Copyright © ShopeX （http://www.shopex.cn）. All rights reserved.
  See LICENSE file for license details.
-->

﻿<style>
    .division table{border:1px solid #dbdbdb;}
    .division table tbody tr{height:24px; line-height:24px;}
    .division table tbody tr th{text-align:right;width:25%}
    .division table tbody tr th, .division table tr td{padding:7px 5px;}
    .division table tbody td input{height:24px; line-height:24px;}
    h5{margin-bottom:12px;color:#305c89;}

</style>
请先去<a href="https://cloudprint.cainiao.com/print/templates.htm" target="_blank">菜鸟云打印</a>后台添加自定义区模板
<div class="division" id="branch-content">
    <div id="agent-company-errorinfo" class="error" style="display:none;"></div>
    <form method="post" action="index.php?app=logisticsmanager&ctl=admin_express_template&act=saveField" id="agent-company-form">
        <input type="hidden" name="template_id" value="<{$tmpl.template_id}>">
        <table cellspacing="0" cellpadding="0" border="0">
            <tbody>
            <tr>
                <th>自定义区：</th>
                <td>
                    <input type="text" name="customer_template_url" size="37" value="<{$tmpl.customer_template_url}>" class="x-input" style="width:360px;"/>
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>
<{area inject=".mainFoot"}>
    <div class="table-action">
        <{button label="确定" class="btn-primary" id="agent-company-submit"}>
        <{button label="取消" class="btn-secondary" isCloseDialogBtn="true" }>
    </div>
<{/area}>

<script language="javascript">
    $('agent-company-submit').addEvent('click',function(e){
        $('agent-company-form').fireEvent('submit',{stop:function(){}});
    });

    $('agent-company-form').store('target', {
        onRequest:function(){
            $E('#agent-company-submit').disabled = true

            $E('#agent-company-submit span span').setText('提交中...')

            $('agent-company-errorinfo').hide()
        },
        onComplete:function(resp){
            $E('#agent-company-submit').disabled = false
            $E('#agent-company-submit span span').setText('确定')

            resp = JSON.decode(resp);
            if (resp.error){
                return $('agent-company-errorinfo').setText(resp.error).show();
            }

            $('agent-company-form').getParent('.dialog').retrieve('instance').close();
        }
    })

</script>
