<!--
  Copyright © ShopeX （http://www.shopex.cn）. All rights reserved.
  See LICENSE file for license details.
-->

<style>
.tginput{
    margin-top:10px;
    margin-bottom:10px;
    padding-left:19px;
    background:none repeat scroll 0 0 #FAFAFA;
    border:1px solid #cccccc;
    color:#069CBC;
    font-size:20px;
    line-height:30px;
    height:35px;
    width: 400px;
}
.tgbutton{
    margin-top: -10px;
    margin-left: 25px;
    font-size:1.5em;

    height: 39px; 
    width:100px;
    cursor:pointer;
    display:-moz-inline-stack;
    line-height: 35px;
    overflow: visible;
    text-decoration: none;
    vertical-align: middle;
}
.tableLeft{
    text-align:right;
}
</style>
<div class="division" container="true">
    <div id="main" class="division">
        <h3>查询库存冻结流水:</h3>
        <form method="post" id="reset_submit" action="index.php?app=console&ctl=admin_stock&act=reset_order_store_freeze">
        <table width="100%" cellspacing="0" cellpadding="0" border="0">
            <tbody>
                <tr>
                    <td>
                        <span style="font-size: 1.5em;font-weight: bold;">&nbsp;&nbsp;订单号：</span>
                        <input type="text" id="order_bn" vtype="required" name="order_bn" class='tginput' value=""> 
                        <button type="button" id="btn_select" name="btn_select" class='tgbutton'><span><span>查询</span></span></button>
                        <button type="button" id="btn_reset" name="btn_reset" class='tgbutton'><span><span>重置预占</span></span></button>
                        <input type="hidden" id="page_act" name="page_act" value="select" /> &nbsp;&nbsp;<span style="color:red;"><input type="checkbox" class="combine_setting" name="update_status" id="update_status" value="true" /> 修复订单状态</span>
                    </td>
                </tr>
                <tr><td style="padding-left:10px;"><span style="color:red;">*注意：</span></td></tr>
                <tr><td style="padding-left:20px;"><span style="color:red;">1、重置库存预占流水后，系统会自动计算每个基础物料的冻结库存数量并更新；</span></td></tr>
                <tr><td style="padding-left:20px;"><span style="color:red;">2、当勾选"修复订单状态"时，程序会根据生成的发货单上货品数量，更新订单的确认状态、发货状态；</span></td></tr>
            </tbody>
        </table>
        </form>
    </div>
    <br /><br /><br />
    <{if $freezeList}>
    <h3 style="">库存冻结流水：（订单号：<span style="color:red;"><{$orderInfo.order_bn}></span>，确认状态：<span style="color:red;"><{$orderInfo.shipStatus}></span>，发货状态：<span style="color:red;"><{$orderInfo.processStatus}></span>）</h3>
    <div class="gray_form">
          <table cellpadding="0" cellspacing="0" border="0" class="gridlist">
            <thead>
              <tr>
                  <th>基础物料编号</th>
                  <th>冻结数</th>
                  <th>业务类型</th>
                  <th>店铺</th>
              </tr>
            </thead>
            <tbody>
            <{foreach from=$freezeList item=item}>
              <tr>
                <td><{$item.material_bn}></td>
                <td><{$item.num}></td>
                <td>订单</td>
                <td><{$shop_name}></td>
              </tr>
            <{/foreach}>
            </tbody>
          </table>
    </div>
    <{/if}>
</div>
<script type="text/javascript">
$('order_bn').focus();

$("btn_select").addEvent("click", function(e){
    $("page_act").set("value", 'select');
    $('reset_submit').fireEvent('submit',{stop:$empty});
});

$("btn_reset").addEvent("click", function(e){
    $("page_act").set("value", 'reset');
    $('reset_submit').fireEvent('submit',{stop:$empty});
});
</script>