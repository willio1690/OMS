<!--
  Copyright © ShopeX （http://www.shopex.cn）. All rights reserved.
  See LICENSE file for license details.
-->

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title><{$env.conf.desktop.background.title}></title>
    <link rel="shortcut icon" href="../favicon.gif" type="image/gif" />
    <link href="<{$env.app.res_url}>/css/framework.css" rel="stylesheet" type="text/css"  />
    <script src="<{$env.app.res_url}>/js_mini/crypto-js.min.js" ></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body {
            height: 100%;
            position: relative;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            overflow-x: hidden;
            overflow-y: hidden; /* 禁用滚动条 */
        }
        body {
            background: #f5f7fa;
            background-image: url('<{$env.app.res_url}>/perfect/login-bg.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        /* 登录容器样式 - 居中布局 */
        .signup-contant {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 80px); /* 减去 footer 高度，避免滚动条 */
            padding: 20px;
            width: 100%;
            position: relative;
        }
        .signup-middle {
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
        }
        .signup-contant-main {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            padding: 40px 35px;
            width: 100%;
            position: relative;
        }
        /* Logo 样式 - 居中显示 */
        .login-log {
            max-width: 280px;
            width: auto;
            height: auto;
            margin: 0 auto 28px auto;
            display: block;
            object-fit: contain;
        }
        /* 欢迎文字 - 居中 */
        .login-welcome {
            color: #999;
            font-size: 14px;
            font-weight: 400;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.5;
        }
        /* 表单窗口样式 */
        .signup {
            margin-top: 0;
            width: 100%;
        }
        .signip-main {
            width: 100%;
        }
        .ifram {
            display: none; /* 隐藏左侧图片 */
        }
        .window {
            width: 100%;
            margin: 0;
        }
        /* 标签页切换样式 - 简约设计 */
        .window-tab {
            display: block;
            width: 100%;
            margin-bottom: 24px;
            border-bottom: 1px solid #e8e8e8;
        }
        .window-tab ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 0;
        }
        .window-tab ul li {
            flex: 1;
            text-align: center;
            cursor: pointer;
            padding: 0;
            margin: 0;
        }
        .window-tab ul li .window-tabcurrent-left,
        .window-tab ul li .window-tabcurrent-right {
            display: none;
        }
        .window-tab ul li .window-tabcurrent-mid {
            display: block;
            padding: 14px 20px;
            font-size: 16px;
            color: #999;
            font-weight: 400;
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
        }
        /* 当前选中的标签 - 文字和下划线高亮 */
        .window-tab-current .window-tabcurrent-mid {
            color: #157FE3 !important;
            border-bottom-color: #157FE3 !important;
            border-bottom-width: 2px !important;
        }
        /* 未选中的标签 */
        .window-tab-non-current .window-tabcurrent-mid {
            color: #999 !important;
            border-bottom-color: transparent !important;
        }
        /* 只有一个标签时隐藏 */
        .window-tab ul li:only-child {
            display: none;
        }
        .window-tab:has(li:only-child) {
            display: none;
        }
        .window-main {
            width: 100%;
            margin: 0;
            display: none;
        }
        .window-main:first-child {
            display: block;
        }
        .window-main.active {
            display: block;
        }
        .passport-bd {
            width: 100%;
            text-align: left;
            margin: 0;
            padding: 0;
        }
        /* 确保表单左对齐 */
        .passport-bd form {
            text-align: left;
            width: 100%;
        }
        /* Footer */
        .login-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 30px 0; /* 增加上下间距 */
            z-index: 1000;
            background: transparent;
            height: 60px; /* 固定高度，便于计算 */
        }
        .login-footer-text {
            color: #999;
            font-size: 12px;
            font-family: Arial, Helvetica, sans-serif;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .login-footer-text img {
            height: 16px;
            vertical-align: middle;
        }
        .login-footer-text a {
            color: #999;
            text-decoration: none;
        }
        .login-footer-text a:hover {
            opacity: 0.8;
        }
        /* 二维码登录样式 */
        #qrcode_div {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 0;
            min-height: 200px;
        }
        #qrcode_div canvas {
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            padding: 10px;
            background: #fff;
        }
        /* 响应式设计 - 小屏幕适配 */
        @media (max-width: 480px) {
            .signup-contant {
                padding: 15px;
                min-height: calc(100vh - 70px); /* 小屏幕调整 */
            }
            .signup-contant-main {
                padding: 30px 25px;
            }
            .login-log {
                max-width: 220px;
                margin-bottom: 24px;
            }
            .window-tab {
                margin-bottom: 20px;
            }
        }
        @media (max-height: 700px) {
            .signup-contant {
                padding: 15px;
                min-height: calc(100vh - 60px); /* 低屏幕高度时调整 */
            }
            .signup-contant-main {
                padding: 30px 30px;
            }
            .login-log {
                max-width: 240px;
                margin-bottom: 24px;
            }
            .window-tab {
                margin-bottom: 20px;
            }
        }
        @media (max-height: 600px) {
            .signup-contant {
                padding: 10px;
                min-height: calc(100vh - 50px); /* 更低屏幕高度时调整 */
            }
            .signup-contant-main {
                padding: 25px 22px;
            }
            .login-log {
                max-width: 200px;
                margin-bottom: 20px;
            }
            .window-tab {
                margin-bottom: 18px;
            }
        }
        @media (max-height: 500px) {
            .signup-contant {
                padding: 10px;
                min-height: calc(100vh - 50px); /* 最低屏幕高度时调整 */
            }
            .login-footer {
                padding: 20px 0; /* 低屏幕时减少 footer 间距 */
                height: 50px; /* 低屏幕时减少高度 */
            }
            .signup-contant-main {
                padding: 22px 18px;
            }
            .login-log {
                max-width: 180px;
                margin-bottom: 16px;
            }
            .window-tab {
                margin-bottom: 14px;
            }
        }
        @media (max-width: 480px) and (max-height: 700px) {
            .signup-contant {
                min-height: calc(100vh - 60px); /* 小屏幕且低高度时 */
            }
            .signup-contant-main {
                padding: 30px 20px;
            }
            .login-log {
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
<{$top_shopex_cn_call}>
<div class="signup-contant clearfix">
    <div class="signup-middle">
        <div class="signup-contant-main ">
            <img class="login-log" src="<{if $siteInfo.logoUrl}><{$siteInfo.logoUrl}><{else}><{$env.app.res_url}>/logo.png<{/if}>" >
            <div class="signup">
                <div class="signip-main">
                    <div class="ifram">
                        <img src="<{$env.app.res_url}>/perfect/login-bg.jpg" width="282" height="202" style="margin-left:30px;">
                    </div>
                    <div class="window">
                        <{$account_a}>
                        <div class="window-tab">
                            <ul>
                                <{foreach from=$passports item=item key=index}>
                                <li class="<{if $index == 0}>window-tab-current<{else}>window-tab-non-current<{/if}>" value="<{$item.value}>" >
                                    <div class="window-tabcurrent-left"></div>
                                    <div class="window-tabcurrent-mid"><{$item.name}></div>
                                    <div class="window-tabcurrent-right"></div>
                                </li>
                                <{/foreach}>
                            </ul>
                        </div>
                        <{foreach from=$passports item=item key=index}>
                        <div class="window-main <{if $index == 0}>active<{/if}>" id = "<{$item.value}>_part">
                            <div class="passport-bd"> <{$item.html}> </div>
                            <{if $item.value == 'basic'}>
                            <div class="passport-bd">
                                <ul>
                                    <{foreach from=$passports_sso item=sso}>
                                    <li style="float: left;margin-right: 10px;"><{$sso.html}></li>
                                    <{/foreach}>
                                </ul>
                            </div>
                            <{/if}>
                        </div>
                        <{/foreach}>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- If you remove or alter Shopex brand identifiers, you must obtain a branding removal license from Shopex.  Contact us at:  http://www.shopex.cn to purchase a branding removal license. -->
<div class="login-footer">
    <div class="login-footer-text">
        Powered by
        <a href="https://shopex.cn" target="_blank"><img src="<{$env.app.res_url}>/mini-logo.png" alt="oneX OMS Logo" /></a>
    </div>
</div>

<{if $desktop_login_verify}><{$desktop_login_verify}><{/if}>

<script>
  //清除缓存
  // window.parent.localStorage.clear();
  void function(){

    var sURL = location.href;
    var sTitle = document.title;
    addFavorite = function() {
      try {
        window.external.addFavorite(sURL, sTitle);
      } catch (e) {
        try {
          window.sidebar.addPanel(sTitle, sURL, "");
        } catch (e) {
          var c = "ctrl";
          if (navigator.platform.match(/mac/i)) {
            c = "command"
          }
          alert("<{t}>请使用键盘上<{/t}>\n\n" + c
            + "+D\n\n<{t}>进行收藏操作。<{/t}>");
        }
      }
      return false;
    }
    createShortcut = function() {

      var sname = document.title.replace(/\s/ig, '');
      var surl = location.href;
      document.createshortcuts.furl.value = surl;
      document.createshortcuts.fname.value = sname;
      document.createshortcuts.submit();
    }

  }();

  // 标签页切换功能（使用原生 JavaScript，避免与 o2o-login.html 中的 jQuery 冲突）
  document.addEventListener('DOMContentLoaded', function() {
    // 如果只有一个标签，隐藏标签栏
    var tabs = document.querySelectorAll('.window-tab ul li');
    if (tabs.length <= 1) {
      var tabContainer = document.querySelector('.window-tab');
      if (tabContainer) {
        tabContainer.style.display = 'none';
      }
    }
    
    // 标签点击切换
    tabs.forEach(function(tab) {
      tab.addEventListener('click', function() {
        var value = this.getAttribute('value');
        
        // 切换标签样式
        tabs.forEach(function(t) {
          t.classList.remove('window-tab-current');
          t.classList.add('window-tab-non-current');
        });
        this.classList.remove('window-tab-non-current');
        this.classList.add('window-tab-current');
        
        // 切换内容显示
        var contents = document.querySelectorAll('.window-main');
        contents.forEach(function(c) {
          c.classList.remove('active');
          c.style.display = 'none';
        });
        var targetContent = document.getElementById(value + '_part');
        if (targetContent) {
          targetContent.classList.add('active');
          targetContent.style.display = 'block';
        }
      });
    });
  });

</script>
<form action="index.php?app=desktop&ctl=createshortcuts" name="createshortcuts" target="_blank" method="post">
    <input type="hidden" name="furl" value=""/>
    <input type="hidden" name="fname" value=""/>
</form>
</body>
</html>
