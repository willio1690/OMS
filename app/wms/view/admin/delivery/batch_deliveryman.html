<!--
  Copyright © ShopeX （http://www.shopex.cn）. All rights reserved.
  See LICENSE file for license details.
-->

<style>
    .delivery-tab{margin:0;padding:0;overflow:hidden;}
    .delivery-tab li{float:left; width:200px;height:24px;line-height:24px;margin-right:5px;font-size: 12px;overflow:hidden;}
    .delivery-tab .hover{background-position:0 0;font-weight:bold;}
</style>
<form method="POST" action="index.php?app=wms&ctl=admin_receipts_print&act=doDeliveryman" class="tableform" id="form_change_dly">
<input type="hidden" id="delivery_ids" name="delivery_ids" value="<{$delivery_ids}>" />
<div class="tableform">
    <div class="note">
        本次操作您共选择了 <font color='red'><span id='orderCount'><{$orderCnt}></span></font> 个发货单。
    </div>
    <div>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td width="90" nowrap="nowrap"><em><font color='red'>*</font></em>配送员姓名：</td>
          <td><input autocomplete="off" class="x-input " type="text" name="deliveryman" id="deliveryman" size="15" vtype="required"></td>
        </tr>
        <tr>
          <td nowrap="nowrap"><em><font color='red'>*</font></em>配送员手机号：</td>
          <td><input name="deliveryman_mobile" type="text" class="x-input " id="deliveryman_mobile" size="15" maxlength="11" autocomplete="off" vtype="required" oninput="value=value.replace(/[^\d]/g,'')" > <span style="color:red;">*只能填写11位数字。</span></td>
        </tr>
      </table>
    </div>
</div>
</form>
<{area inject='.mainFoot'}>
<div class="table-action">
    <{button type="button" label="修改配送员信息" id="btn-run"}>
</div>
<{/area}>

<script>
(function(){
    var _form = $('form_change_dly');
    var btn =$('btn-run');
    var finder = finderGroup['<{$env.get._finder.finder_id}>'];
    
    _form.store('target',{
        onSuccess:function(response){
            var hash_res_obj = JSON.decode(response);
        
            if (hash_res_obj.success != undefined && hash_res_obj.success != ""){
                try{
                    var _dialogIns = btn.getParent('.dialog').retrieve('instance');
                }catch(e){}
                
                if(_dialogIns){    
                    _dialogIns.close();
                    window.finderGroup['<{$env.get._finder.finder_id}>'].refresh();
                }
            }
            
        }
    });

    btn.addEvent('click',function(){
        _form.fireEvent('submit',{stop:$empty});
    });
    
})();
</script>
