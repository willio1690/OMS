<!--
  Copyright Â© ShopeX ï¼ˆhttp://www.shopex.cnï¼‰. All rights reserved.
  See LICENSE file for license details.
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="./common.css" />
    <link rel="stylesheet" type="text/css" href="./index.css" />
    <script src="./axios.min.js"></script>
    <script src="./flexible.js"></script>
  </head>

  <body>
    <div class="page flex-col">
      <!-- heder -->
      <div class="section_1">
        <div class="text-wrapper_1 flex-row align-center justify-between">
          <img src="./icon-back.png" class="icon-back" />
          <span class="text_1">éªŒè´§é€€æ¬¾</span>
          <img src="./icon-refresh.png" class="icon-refresh" />
        </div>
      </div>
      <!-- tab -->
      <div class="section_2 flex-col">
        <div class="group_1 flex-col tab-scroll-container">
          <div class="group_2 flex-row">
            <div class="group_3 flex-col">
              <span class="text_5">å…¨éƒ¨</span>
            </div>
            <div class="group_3 flex-col">
              <span class="text_5">å¾…é€€æ¬¾ç¡®è®¤</span>
              <div class="text-wrapper_3 flex-col">
                <span class="text_6">6</span>
              </div>
            </div>
            <div class="group_3 flex-col">
              <span class="text_5">å·²åŒæ„</span>
              <div class="text-wrapper_3 flex-col">
                <span class="text_6">5</span>
              </div>
            </div>
            <div class="group_3 flex-col">
              <span class="text_5">å·²æ‹’ç»å¾…å®¢æœç¡®è®¤</span>
            </div>
            <div class="group_3 flex-col">
              <span class="text_5 tab-active">å®¢æœå·²æ‹’ç»</span>
            </div>
            <div class="group_4 flex-row"></div>
          </div>
        </div>
        <div class="group_6 flex-col justify-between">
          <!-- æ—¥æœŸé€‰æ‹© -->
          <div class="date-select-box flex-row">
            <button class="date-select-item active">ä»Šå¤©</button>
            <button class="date-select-item">æ˜¨å¤©</button>
            <button class="date-select-item">æœ¬æœˆ</button>
            <button class="date-select-item" onclick="showTimeModal()">
              è‡ªå®šä¹‰
            </button>
          </div>
          <div class="flex-row justify-between">
            <div class="box_1 flex-row justify-between" id="customSelect">
              <span class="text_9 current-type">è®¢å•å·</span>
              <img
                class="thumbnail_1"
                referrerpolicy="no-referrer"
                src="./icon-arrow-down.png"
              />
            </div>
            <div class="select-options" id="selectOptions">
              <div class="option-item" data-value="order_no">è®¢å•å·</div>
              <div class="option-item" data-value="channel">æ¸ é“</div>
              <div class="option-item" data-value="buyer_mobile">
                ä¹°å®¶æ‰‹æœºå·
              </div>
              <div class="option-item" data-value="receiver_mobile">
                æ”¶è´§äººæ‰‹æœºå·
              </div>
              <div class="option-item" data-value="express_no">å¿«é€’å•å·</div>
            </div>

            <div class="text-wrapper_4 flex-col search-box">
              <input
                class="text_10 search-input"
                type="text"
                placeholder="è¯·è¾“å…¥è®¢å•å·"
                style="display: block"
              />
              <img src="./icon-scan.png" class="search-scan-icon" />
              <select
                class="text_10 search-input channel-select"
                style="display: none"
                onchange="handleSearch(this.value)"
              >
                <option value="æ¸ é“1">æ¸ é“1</option>
                <option value="æ¸ é“2">æ¸ é“2</option>
                <option value="æ¸ é“3">æ¸ é“3</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <!-- list -->
      <div class="section_4 flex-col">
        <!-- æ¨¡æ‹Ÿ è®¢å•åˆ—è¡¨ï¼Œæ–¹é¢åç«¯ä½¿ç”¨è®¢å•æ¨¡ç‰ˆ -->
        <div class="list-item">
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">æ¸ é“ï¼š</span>
            <span class="text_12">è§†é¢‘å·</span>
            <span class="text_13">å¾…é€€æ¬¾ç¡®è®¤</span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">è®¢å•å·ï¼š</span>
            <span class="text_12">575679345343466</span>
            <span
              class="text_13 countdown"
              data-deadline="1739999618000"
            ></span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">å‘è´§å•å·ï¼š</span>
            <span class="text_12">O353443654657</span>
          </div>
          <div class="text-wrapper_4 flex-col">
            <input class="text_10 search-input" type="text" placeholder="è¯·è¾“å…¥è®¢å•å·" style="display:block">
            <div class="custom-channel-select" data-name="channel" style="display:none">
              <div class="custom-channel-select-trigger">
                <span class="custom-channel-select-value">è¯·é€‰æ‹©æ¸ é“</span>
                <img class="custom-channel-select-arrow" src="./icon-arrow-down.png" />
              </div>
              <div class="custom-channel-select-options">
                <div class="custom-channel-select-option" data-value="">è¯·é€‰æ‹©æ¸ é“</div>
                <div class="custom-channel-select-option" data-value="æ¸ é“1">æ¸ é“1</div>
                <div class="custom-channel-select-option" data-value="æ¸ é“2">æ¸ é“2</div>
                <div class="custom-channel-select-option" data-value="æ¸ é“3">æ¸ é“3</div>
              </div>
            </div>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">ä¸‹å•æ—¶é—´ï¼š</span>
            <span class="text_12">2024-12-13&nbsp;14:14:46</span>
          </div>
          <div class="text-wrapper_5 flex-row pr">
            <span class="text_11">æ”¶ä»¶äººï¼š</span>
            <span
              class="text_26 sensitive-text flex-shrink-1"
              data-raw="å±å…ˆç”Ÿï¼ˆ15912343352ï¼‰"
              data-masked="å±*ï¼ˆ159****3352ï¼‰"
              >å±*ï¼ˆ159****3352ï¼‰</span
            >
            <span class="text_27 copy-btn" data-copy="15912343352">å¤åˆ¶</span>
            <div class="toggle-visibility label_1">
              <i class="eye-icon hidden"></i>
            </div>
            <!-- <img class="label_1 toggle-visibility" referrerpolicy="no-referrer" src="./icon-eye.png" /> -->
          </div>
          <div class="text-wrapper_5 flex-row">
            <span class="text_11">æ”¶è´§åœ°å€ï¼š</span>
            <span
              class="text_26 sensitive-text flex-shrink-1"
              data-raw="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·"
              data-masked="****"
              >****</span
            >
            <span
              class="text_27 copy-btn"
              data-copy="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·"
              >å¤åˆ¶</span
            >
            <div class="status-order-box">
              <span class="status-order">å·²ç­¾æ”¶</span>
            </div>
          </div>
          <div class="hr"></div>
          <!-- goodsInfo -->
          <div class="section_6 flex-row">
            <img
              class="image_2"
              referrerpolicy="no-referrer"
              src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794"
            />
            <div class="text-group_1 flex-col">
              <div class="status-info">
                <span class="text_28 flex-shrink-1"
                  >MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span
                >
                <span class="status-returned">å·²é€€è´§</span>
              </div>
              <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
              <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
              <!-- <span class="text_31">ï¿¥1800.00</span> -->
            </div>
          </div>
          <div class="section_6 justify-between flex-wrap">
            <div class="mrg-side-4">
              <span class="text_36">ä¹°å®¶</span
              ><span class="text_37">ï¿¥1000.23</span>
            </div>
            <div class="mrg-side-4">
              <span class="text_36">ä¼˜æƒ </span
              ><span class="text_37">ï¿¥1000.23</span>
            </div>
            <div class="mrg-side-4">
              <span class="text_36">å•†å®¶</span
              ><span class="text_37">ï¿¥1000.23</span>
            </div>
          </div>

          <div class="section_6 flex-row">
            <img
              class="image_2"
              referrerpolicy="no-referrer"
              src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794"
            />
            <div class="text-group_1 flex-col">
              <div class="status-info">
                <span class="text_28 flex-shrink-1"
                  >MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span
                >
              </div>
              <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
              <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
              <!-- <span class="text_31">ï¿¥1800.00</span> -->
            </div>
          </div>
          <div class="section_6 justify-between flex-wrap">
            <div class="mrg-side-4">
              <span class="text_36">ä¹°å®¶</span
              ><span class="text_37">ï¿¥1000.23</span>
            </div>
            <div class="mrg-side-4">
              <span class="text_36">ä¼˜æƒ </span
              ><span class="text_37">ï¿¥1000.23</span>
            </div>
            <div class="mrg-side-4">
              <span class="text_36">å•†å®¶</span
              ><span class="text_37">ï¿¥1000.23</span>
            </div>
          </div>
          <!-- total -->
          <!-- ä¹°å®¶å®ä»˜  ä¼˜æƒ    å•†å®¶æ”¶å…¥ -->
          <!-- <div class="section_6 justify-between flex-wrap">
          <div class="mrg-side-4">
            <span class="text_36">ä¹°å®¶</span><span class="text_37">ï¿¥1000.23</span>
          </div>
          <div class="mrg-side-4">
            <span class="text_36">ä¼˜æƒ </span><span class="text_37">ï¿¥1000.23</span>
          </div>
          <div class="mrg-side-4">
            <span class="text_36">å•†å®¶</span><span class="text_37">ï¿¥1000.23</span>
          </div>
        </div> -->
          <div class="text-wrapper_11 flex-row">
            <span class="text_36">æ€»ä»·ï¼š</span>
            <span class="text_37">ï¿¥3600.00</span>
          </div>
          <div class="section_7 flex-row justify-end">
            <div class="text-wrapper_12 flex-col">
              <span class="text_38" onclick="showSendModal()">ç¡®è®¤å‘è´§</span>
            </div>
            <div class="text-wrapper_12 flex-col">
              <span class="text_38" onclick="showInterceptModal()"
                >æ‹¦æˆªç™»è®°</span
              >
            </div>
            <div class="text-wrapper_12 flex-col">
              <span class="text_38" onclick="showWriteOffModal()"
                >ç¡®è®¤æ ¸é”€</span
              >
            </div>
          </div>
        </div>

        <div class="list-item">
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">æ¸ é“ï¼š</span>
            <span class="text_12">è§†é¢‘å·</span>
            <span class="text_13">å¾…é€€æ¬¾ç¡®è®¤</span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">è®¢å•å·ï¼š</span>
            <span class="text_12">575679345343466</span>
            <span
              class="text_13 countdown"
              data-deadline="1736998618000"
            ></span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">å‘è´§å•å·ï¼š</span>
            <span class="text_12">O353443654657</span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">ä¸‹å•æ—¶é—´ï¼š</span>
            <span class="text_12">2024-12-13&nbsp;14:14:46</span>
          </div>
          <div class="text-wrapper_5 flex-row pr">
            <span class="text_11">æ”¶ä»¶äººï¼š</span>
            <span
              class="text_26 sensitive-text flex-shrink-1"
              data-raw="å±å…ˆç”Ÿï¼ˆ15912343352ï¼‰"
              data-masked="å±*ï¼ˆ159****3352ï¼‰"
              >å±*ï¼ˆ159****3352ï¼‰</span
            >
            <span class="text_27 copy-btn" data-copy="15912343352">å¤åˆ¶</span>
            <div class="toggle-visibility label_1">
              <i class="eye-icon hidden"></i>
            </div>
            <!-- <img class="label_1 toggle-visibility" referrerpolicy="no-referrer" src="./icon-eye.png" /> -->
          </div>
          <div class="text-wrapper_5 flex-row">
            <span class="text_11">æ”¶è´§åœ°å€ï¼š</span>
            <span
              class="text_26 sensitive-text flex-shrink-1"
              data-raw="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·"
              data-masked="****"
              >****</span
            >
            <span
              class="text_27 copy-btn"
              data-copy="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·"
              >å¤åˆ¶</span
            >
            <div class="status-order-box">
              <span class="status-order">å·²ç­¾æ”¶</span>
            </div>
          </div>
          <div class="hr"></div>
          <!-- goodsInfo -->
          <div class="section_6 flex-row">
            <img
              class="image_2"
              referrerpolicy="no-referrer"
              src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794"
            />
            <div class="text-group_1 flex-col">
              <div class="status-info">
                <span class="text_28 flex-shrink-1"
                  >MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span
                >
                <span class="status-returned">å·²é€€è´§</span>
              </div>
              <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
              <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
              <span class="text_31">ï¿¥1800.00</span>
            </div>
          </div>
          <div class="section_6 flex-row">
            <img
              class="image_2"
              referrerpolicy="no-referrer"
              src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794"
            />
            <div class="text-group_1 flex-col">
              <div class="status-info">
                <span class="text_28 flex-shrink-1"
                  >MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span
                >
              </div>
              <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
              <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
              <span class="text_31">ï¿¥1800.00</span>
            </div>
          </div>
          <!-- total -->
          <div class="text-wrapper_11 flex-row">
            <span class="text_36">æ€»ä»·ï¼š</span>
            <span class="text_37">ï¿¥3600.00</span>
          </div>
          <div class="section_7 flex-row justify-end">
            <div class="text-wrapper_12 flex-col">
              <span class="text_38">æŸ¥çœ‹ç‰©æµ</span>
            </div>
            <div class="text-wrapper_12 flex-col">
              <span class="text_38" onclick="showTrackingModal()"
                >è¡¥å½•è¿å•å·</span
              >
            </div>
          </div>
        </div>
        <!-- å”®åç”³è¯·å®¡æ ¸ -->
        <div class="list-item">
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">æ¸ é“ï¼š</span>
            <span class="text_12">è§†é¢‘å·</span>
            <span class="text_13">å¾…é€€æ¬¾ç¡®è®¤</span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">è®¢å•å·ï¼š</span>
            <span class="text_12">575679345343466</span>
            <span
              class="text_13 countdown"
              data-deadline="1736998618000"
            ></span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">å‘è´§å•å·ï¼š</span>
            <span class="text_12">O353443654657</span>
          </div>
          <div class="text-wrapper_5 flex-row justify-between">
            <span class="text_11">ä¸‹å•æ—¶é—´ï¼š</span>
            <span class="text_12">2024-12-13&nbsp;14:14:46</span>
          </div>
          <div class="text-wrapper_5 flex-row pr">
            <span class="text_11">æ”¶ä»¶äººï¼š</span>
            <span
              class="text_26 sensitive-text flex-shrink-1"
              data-raw="å±å…ˆç”Ÿï¼ˆ15912343352ï¼‰"
              data-masked="å±*ï¼ˆ159****3352ï¼‰"
              >å±*ï¼ˆ159****3352ï¼‰</span
            >
            <span class="text_27 copy-btn" data-copy="15912343352">å¤åˆ¶</span>
            <div class="toggle-visibility label_1">
              <i class="eye-icon hidden"></i>
            </div>
            <!-- <img class="label_1 toggle-visibility" referrerpolicy="no-referrer" src="./icon-eye.png" /> -->
          </div>
          <div class="text-wrapper_5 flex-row">
            <span class="text_11">æ”¶è´§åœ°å€ï¼š</span>
            <span
              class="text_26 sensitive-text flex-shrink-1"
              data-raw="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·"
              data-masked="****"
              >****</span
            >
            <span
              class="text_27 copy-btn"
              data-copy="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·"
              >å¤åˆ¶</span
            >
            <div class="status-order-box">
              <span class="status-order">å·²ç­¾æ”¶</span>
            </div>
          </div>
          <div class="hr"></div>
          <!-- goodsInfo -->
          <div class="section_6 flex-row">
            <img
              class="image_2"
              referrerpolicy="no-referrer"
              src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794"
            />
            <div class="text-group_1 flex-col">
              <div class="status-info">
                <span class="text_28 flex-shrink-1"
                  >MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span
                >
                <span class="status-returned">å·²é€€è´§</span>
              </div>
              <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
              <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
              <span class="text_31">ï¿¥1800.00</span>
            </div>
          </div>
          <div class="return_goods">
            <div class="text-wrapper_5 flex-row justify-between align-center">
              <span class="text_32">æ¢è´§å•å·ï¼š</span>
              <span class="text_33">886679345343466</span>
            </div>
            <div class="text-wrapper_5 flex-row justify-between align-center">
              <span class="text_32">ç”³è¯·ç†ç”±ï¼š</span>
              <span class="text_33">å°ºç ä¸åˆé€‚</span>
            </div>
            <div class="section_6 flex-row">
              <img
                class="image_2"
                referrerpolicy="no-referrer"
                src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794"
              />
              <div class="text-group_1 flex-col">
                <div class="status-info">
                  <span class="text_28 flex-shrink-1"
                    >MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span
                  >
                </div>
                <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
                <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
                <!-- <span class="text_31">ï¿¥1800.00</span> -->
              </div>
            </div>
          </div>

          <!-- total -->
          <div class="text-wrapper_11 flex-row">
            <span class="text_36">æ€»ä»·ï¼š</span>
            <span class="text_37">ï¿¥3600.00</span>
          </div>
          <div class="section_7 flex-row justify-end">
            <div class="text-wrapper_12 flex-col">
              <span class="text_38" onclick="showReturnModal()"
                >å”®åç”³è¯·å®¡æ ¸</span
              >
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="mask" id="mask"></div>
    <div class="toast" id="toast"></div>
    <!-- å¼¹çª—ç»„ä»¶ -->
    <!-- å¼¹çª—ç»„ä»¶æ¨¡æ¿ -->
    <div class="modal" id="commonModal" style="display: none">
      <div class="modal-mask"></div>
      <div class="modal-container">
        <div class="modal-header">
          <h3 class="modal-title"></h3>
          <span class="modal-close">Ã—</span>
        </div>
        <div class="modal-content">
          <!-- åŠ¨æ€å†…å®¹åŒºåŸŸ -->
        </div>
        <div class="modal-footer justify-between">
          <button class="modal-btn modal-cancle">å–æ¶ˆ</button>
          <button class="modal-btn modal-confirm">ç¡®å®š</button>
        </div>
      </div>
    </div>

    <!-- loading -->
    <div class="loading-container" style="display: none">
      <div class="loading-spinner"></div>
      <span class="loading-text">åŠ è½½ä¸­...</span>
    </div>

    <!-- å¼•å…¥å…±ç”¨çš„js -->
    <script src="./common.js"></script>
    <script>
      // åˆå§‹åŒ–å¼¹çª—å®ä¾‹
      const modal = new Modal();

      // API æ–¹æ³•å°è£…
      const api = {
        getOrders(params) {
          return request.get('/orders', params);
        },
        // å‘è´§
        search(params) {
          return request.post('/search', params);
        },
      };

      // é€šç”¨åŠŸèƒ½æ¨¡å—
      const commonFeatures = {
        // å¤åˆ¶åŠŸèƒ½
        initCopyFeature(container = document) {
          const copyButtons = container.querySelectorAll('.copy-btn');
          copyButtons.forEach((button) => {
            button.addEventListener('click', async () => {
              const textToCopy = button.getAttribute('data-copy');
              try {
                await navigator.clipboard.writeText(textToCopy);
                showToast('å¤åˆ¶æˆåŠŸ');
              } catch (err) {
                this.fallbackCopy(textToCopy);
              }
            });
          });
        },

        // é™çº§å¤åˆ¶æ–¹æ³•
        fallbackCopy(text) {
          const textarea = document.createElement('textarea');
          textarea.value = text;
          textarea.style.position = 'fixed';
          textarea.style.opacity = '0';
          document.body.appendChild(textarea);

          textarea.select();
          try {
            document.execCommand('copy');
            showToast('å¤åˆ¶æˆåŠŸ');
          } catch (err) {
            console.error('å¤åˆ¶å¤±è´¥:', err);
          }
          document.body.removeChild(textarea);
        },

        // æ•æ„Ÿä¿¡æ¯åˆ‡æ¢åŠŸèƒ½
        initToggleVisibility(container = document) {
          const toggleBtns = container.querySelectorAll('.toggle-visibility');
          toggleBtns.forEach((toggleBtn) => {
            const listItem = toggleBtn.closest('.list-item');
            const eyeIcon = toggleBtn.querySelector('.eye-icon');
            const sensitiveTexts = listItem.querySelectorAll('.sensitive-text');
            let isVisible = false;

            toggleBtn.addEventListener('click', function () {
              isVisible = !isVisible;
              eyeIcon.classList.toggle('hidden');
              eyeIcon.classList.toggle('visible');
              sensitiveTexts.forEach((text) => {
                text.textContent = isVisible
                  ? text.getAttribute('data-raw')
                  : text.getAttribute('data-masked');

                // åŒæ—¶æ›´æ–°å¤åˆ¶æŒ‰é’®çš„data-copyå±æ€§
                const copyBtn = text.nextElementSibling;
                if (copyBtn && copyBtn.classList.contains('copy-btn')) {
                  copyBtn.setAttribute(
                    'data-copy',
                    isVisible
                      ? text.getAttribute('data-raw')
                      : text.getAttribute('data-masked'),
                  );
                }
              });
            });

            // æ·»åŠ è§¦æ‘¸åé¦ˆ
            toggleBtn.addEventListener('touchstart', function () {
              this.style.opacity = '0.7';
            });

            toggleBtn.addEventListener('touchend', function () {
              this.style.opacity = '1';
            });
          });
        },

        // å€’è®¡æ—¶åŠŸèƒ½
        initCountdown(container = document) {
          const countdownElements = container.querySelectorAll('.countdown');

          function formatCountdown(milliseconds) {
            if (milliseconds <= 0) return 'å·²è¶…æ—¶';

            const seconds = Math.floor(milliseconds / 1000);
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = seconds % 60;

            return `å³å°†è¶…æ—¶${String(h).padStart(2, '0')}:${String(m).padStart(
              2,
              '0',
            )}:${String(s).padStart(2, '0')}`;
          }

          countdownElements.forEach((element) => {
            const deadline = parseInt(element.getAttribute('data-deadline'));
            const timer = setInterval(() => {
              const now = Date.now();
              const remaining = deadline - now;

              if (remaining <= 0) {
                clearInterval(timer);
                element.textContent = 'å·²è¶…æ—¶';
                return;
              }

              element.textContent = formatCountdown(remaining);
            }, 1000);
          });
        },

        // åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
        initAll(container = document) {
          this.initCopyFeature(container);
          this.initToggleVisibility(container);
          this.initCountdown(container);
        },
      };

      // æ—¥æœŸé€‰æ‹©åŠŸèƒ½å®ç°, æ¨¡æ‹Ÿè¯·æ±‚
      const dateButtons = document.querySelectorAll('.date-select-item');

      dateButtons.forEach((button) => {
        button.addEventListener('click', async function () {
          // ç§»é™¤å…¶ä»–æŒ‰é’®çš„æ´»è·ƒçŠ¶æ€
          dateButtons.forEach((btn) => btn.classList.remove('active'));
          // æ·»åŠ å½“å‰æŒ‰é’®çš„æ´»è·ƒçŠ¶æ€
          this.classList.add('active');

          const dateType = this.getAttribute('data-type');
          await fetchOrdersByDate(dateType);
        });
      });

      // è·å–è®¢å•æ•°æ®
      async function fetchOrdersByDate(dateType) {
        try {
          const params = {
            dateType,
            // å¯ä»¥æ·»åŠ å…¶ä»–å‚æ•°
            page: 1,
            pageSize: 10,
          };

          const data = await api.getOrders(params);
          // å¤„ç†è¿”å›çš„æ•°æ®ï¼Œæ›´æ–°é¡µé¢
          console.log('è®¢å•æ•°æ®:', data);
        } catch (error) {
          console.error('è·å–è®¢å•å¤±è´¥:', error);
        }
      }

      // æ‹‰ä¸‹æ¡†å®ç°
      const selectBox = document.getElementById('customSelect');
      const options = document.getElementById('selectOptions');
      const currentType = selectBox.querySelector('.current-type');
      const searchInput = document.querySelector('.search-input');
      const mask = document.querySelector('.mask');
      let isOpen = false;

      function openSelect() {
        if (!isOpen) {
          options.style.display = 'block';
          mask.style.display = 'block';
          selectBox.classList.add('active');
          isOpen = true;
        }
      }

      function closeSelect() {
        if (isOpen) {
          options.style.display = 'none';
          mask.style.display = 'none';
          selectBox.classList.remove('active');
          isOpen = false;
        }
      }

      // ç‚¹å‡»é€‰æ‹©æ¡†
      selectBox.addEventListener('click', function (e) {
        e.stopPropagation();
        if (!isOpen) {
          openSelect();
        } else {
          closeSelect();
        }
      });

      // ç‚¹å‡»é€‰é¡¹
      document.querySelectorAll('.option-item').forEach((item) => {
        item.addEventListener('click', function (e) {
          e.stopPropagation();
          const value = this.getAttribute('data-value');
          const text = this.textContent;

          currentType.textContent = text;

          const placeholders = {
            order_no: 'è¯·è¾“å…¥è®¢å•å·',
            order_date: 'è¯·é€‰æ‹©è®¢å•æ—¥æœŸ',
            channel: 'è¯·é€‰æ‹©æ¸ é“',
            buyer_mobile: 'è¯·è¾“å…¥ä¹°å®¶æ‰‹æœºå·',
            receiver_mobile: 'è¯·è¾“å…¥æ”¶è´§äººæ‰‹æœºå·',
            express_no: 'è¯·è¾“å…¥å¿«é€’å•å·',
            return_express_no: 'è¯·è¾“å…¥é€€è´§ç‰©æµå•å·',
          };
          searchInput.placeholder = placeholders[value] || 'è¯·è¾“å…¥æœç´¢å†…å®¹';
          searchInput.value = '';
          if (value === 'channel') {
            // showChannelModal()
            showChannelSelect();
          } else {
            hideChannelSelect();
          }
          closeSelect();
        });
      });

      // ç‚¹å‡»é®ç½©å±‚å…³é—­
      mask.addEventListener('click', closeSelect);

      // ç‚¹å‡»é¡µé¢å…¶ä»–åŒºåŸŸå…³é—­
      document.addEventListener('click', closeSelect);

      // æ¸ é“é€‰æ‹©
      // function showChannelModal() {
      //   modal.show({
      //     title: 'æ¸ é“é€‰æ‹©',
      //     fields: [
      //       {
      //         type: 'select',
      //         name: 'channelType',
      //         label: 'æ¸ é“',
      //         required: true,
      //         options: [
      //           { value: 'æ¸ é“1', label: 'æ¸ é“1' },
      //           { value: 'æ¸ é“2', label: 'æ¸ é“2' },
      //           { value: 'æ¸ é“3', label: 'æ¸ é“3' }
      //         ]
      //       }
      //     ],
      //     onConfirm: async (formData) => {

      //       console.log("ğŸš€ğŸš€ğŸš€ ~ onConfirm: ~ formData:", formData)

      //       try {
      //         if (formData.channelType) {
      //           const searchInput = document.querySelector('.search-input');
      //           searchInput.value = formData.channelType
      //           modal.hide();
      //           handleSearch(formData.channelType)
      //         }
      //       } catch (error) {
      //         console.error('è¡¥å½•è¿å•å·å¤±è´¥:', error);
      //       }
      //     }
      //   });
      // }

      /* æ˜¾ç¤ºæ¸ é“é€‰æ‹© */
      function showChannelSelect() {
        const channelSelect = document.querySelector('.custom-channel-select');
        channelSelect.style.display = 'block';
        const channelInput = document.querySelector('.search-input');
        channelInput.style.display = 'none';

        // åˆå§‹åŒ–è‡ªå®šä¹‰æ¸ é“é€‰æ‹©ç»„ä»¶
        initCustomChannelSelect();
      }

      /*éšè—æ¸ é“é€‰æ‹©*/
      function hideChannelSelect() {
        const channelSelect = document.querySelector('.custom-channel-select');
        channelSelect.style.display = 'none';
        const channelInput = document.querySelector('.search-input');
        channelInput.style.display = 'block';
      }

      // åˆå§‹åŒ–è‡ªå®šä¹‰æ¸ é“é€‰æ‹©ç»„ä»¶
      function initCustomChannelSelect() {
        const channelSelect = document.querySelector('.custom-channel-select');
        if (!channelSelect || channelSelect.hasAttribute('data-events-bound')) {
          return;
        }

        const trigger = channelSelect.querySelector('.custom-channel-select-trigger');
        const options = channelSelect.querySelector('.custom-channel-select-options');
        const valueSpan = channelSelect.querySelector('.custom-channel-select-value');
        const arrow = channelSelect.querySelector('.custom-channel-select-arrow');

        // æ ‡è®°ä¸ºå·²ç»‘å®šäº‹ä»¶
        channelSelect.setAttribute('data-events-bound', 'true');

        // ç‚¹å‡»è§¦å‘å™¨åˆ‡æ¢ä¸‹æ‹‰èœå•
        trigger.addEventListener('click', function(e) {
          e.stopPropagation();
          channelSelect.classList.toggle('active');
        });

        // ç‚¹å‡»é€‰é¡¹
        const optionElements = channelSelect.querySelectorAll('.custom-channel-select-option');
        optionElements.forEach(option => {
          option.addEventListener('click', function(e) {
            e.stopPropagation();

            // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            optionElements.forEach(opt => opt.classList.remove('selected'));

            // è®¾ç½®å½“å‰é€‰é¡¹ä¸ºé€‰ä¸­çŠ¶æ€
            option.classList.add('selected');

            // æ›´æ–°æ˜¾ç¤ºå€¼
            valueSpan.textContent = option.textContent;

            // å…³é—­ä¸‹æ‹‰èœå•
            channelSelect.classList.remove('active');

            // å¤„ç†æœç´¢
            const value = option.getAttribute('data-value');
            if (value) {
              handleSearch(value);
            }
          });
        });

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function() {
          channelSelect.classList.remove('active');
        });
      }

      // åˆ†é¡µç›¸å…³çš„çŠ¶æ€ç®¡ç†
      const pageState = {
        page: 1,
        pageSize: 10,
        loading: false,
        hasMore: true,
        keyword: '',
        searchType: '',
      };

      // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
      commonFeatures.initAll();

      const customSelect = document.getElementById('customSelect');
      const listContainer = document.querySelector('.section_4');

      // åˆå§‹åŒ–åŠ è½½ç¬¬ä¸€é¡µæ•°æ®ï¼Œ
      // loadOrders(); // å¦‚æœç¬¬ä¸€é¡µè¿˜æ˜¯ç”¨smartyé¡µé¢æ•°æ®ï¼Œè¿™ä¸ªæ³¨é‡Šæ‰

      // åŠ è½½è®¢å•æ•°æ®
      async function loadOrders(isLoadMore = false) {
        if (pageState.loading || !pageState.hasMore) return;

        try {
          pageState.loading = true;
          loading.show(isLoadMore); // æ˜¾ç¤º loading

          // æ„å»ºè¯·æ±‚å‚æ•°
          const params = {
            page: pageState.page,
            pageSize: pageState.pageSize,
          };

          if (pageState.keyword) {
            params.keyword = pageState.keyword;
            params.searchType = pageState.searchType;
          }

          // const result = await api.getOrders(params);
          console.log('è¯·æ±‚å‚æ•° params', params);
          // æ¨¡æ‹Ÿè¿”å›æ•°æ®
          const resultData = {
            data: {
              hasMore: true,
              html: `<div class="list-item">
        <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">æ¸ é“ï¼š</span>
          <span class="text_12">è§†é¢‘å·</span>
          <span class="text_13">å¾…é€€æ¬¾ç¡®è®¤</span>
        </div>
        <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">è®¢å•å·ï¼š</span>
          <span class="text_12">575679345343466</span>
          <span class="text_13 countdown" data-deadline="1739999618000"></span>
        </div>
        <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">å‘è´§å•å·ï¼š</span>
          <span class="text_12">O353443654657</span>
        </div>
        <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">ä¸‹å•æ—¶é—´ï¼š</span>
          <span class="text_12">2024-12-13&nbsp;14:14:46</span>
        </div>
        <div class="text-wrapper_5 flex-row pr">
          <span class="text_11">æ”¶ä»¶äººï¼š</span>
          <span class="text_26 sensitive-text flex-shrink-1" data-raw="å±å…ˆç”Ÿï¼ˆ15912343352ï¼‰"
            data-masked="å±*ï¼ˆ159****3352ï¼‰">å±*ï¼ˆ159****3352ï¼‰</span>
          <span class="text_27 copy-btn" data-copy="15912343352">å¤åˆ¶</span>
          <div class="toggle-visibility label_1">
            <i class="eye-icon hidden"></i>
          </div>
          <!-- <img class="label_1 toggle-visibility" referrerpolicy="no-referrer" src="./icon-eye.png" /> -->
        </div>
        <div class="text-wrapper_5 flex-row">
          <span class="text_11">æ”¶è´§åœ°å€ï¼š</span>
          <span class="text_26 sensitive-text flex-shrink-1" data-raw="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·" data-masked="****">****</span>
          <span class="text_27 copy-btn" data-copy="æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯XXXå·">å¤åˆ¶</span>
          <div class="status-order-box">
            <span class="status-order">å·²ç­¾æ”¶</span>
          </div>
        </div>
        <div class="hr"></div>
        <!-- goodsInfo -->
        <div class="section_6 flex-row">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <div class="status-info"> <span class="text_28 flex-shrink-1">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
              <span class="status-returned">å·²é€€è´§</span>
            </div>
            <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
            <span class="text_31">ï¿¥1800.00</span>
          </div>

        </div>
        <div class="section_6 flex-row">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <div class="status-info"> <span class="text_28 flex-shrink-1">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
            </div>
            <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
            <span class="text_31">ï¿¥1800.00</span>
          </div>
        </div>
        <div class="text-wrapper_11 flex-row">
          <span class="text_36">æ€»ä»·ï¼š</span>
          <span class="text_37">ï¿¥3600.00</span>
        </div>
        <div class="section_7 flex-row justify-end">
          <div class="text-wrapper_12 flex-col">
            <span class="text_38" onclick="showSendModal()">ç¡®è®¤å‘è´§</span>
          </div>
          <div class="text-wrapper_12 flex-col">
            <span class="text_38" onclick="showInterceptModal()">æ‹¦æˆªç™»è®°</span>
          </div>
          <div class="text-wrapper_12 flex-col">
              <span class="text_38" onclick="showWriteOffModal()"
                >ç¡®è®¤æ ¸é”€</span
              >
            </div>
        </div>
      </div>`.repeat(10),
            },
          };
          const result = await new Promise((resolve) => {
            setTimeout(() => {
              resolve(resultData);
            }, 1000);
          });
          // console.log(123, result.data)
          if (result && result.data) {
            if (isLoadMore) {
              // è¿½åŠ æ•°æ®
              listContainer.insertAdjacentHTML('beforeend', result.data.html);
            } else {
              // æ›¿æ¢æ•°æ®å¹¶æ»šåŠ¨åˆ°é¡¶éƒ¨
              listContainer.innerHTML = result.data.html;
              window.scrollTo({
                top: 0,
                // behavior: 'smooth' // å¹³æ»‘æ»šåŠ¨æ•ˆæœ
              });
            }

            pageState.hasMore = result.data.hasMore;
            if (pageState.hasMore) {
              pageState.page++;
            } else if (isLoadMore) {
              // å¦‚æœæ˜¯åŠ è½½æ›´å¤šä¸”æ²¡æœ‰æ›´å¤šæ•°æ®ï¼Œæ˜¾ç¤ºæç¤º
              const noMore = document.createElement('div');
              noMore.className = 'loading-more';
              noMore.innerHTML = 'æ²¡æœ‰æ›´å¤šæ•°æ®äº†';
              document.querySelector('.section_4').appendChild(noMore);
            }

            commonFeatures.initAll(listContainer);
          }
        } catch (error) {
          console.error('åŠ è½½è®¢å•å¤±è´¥:', error);
          showToast('åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•');
        } finally {
          pageState.loading = false;
          loading.hide(); // éšè— loading
        }
      }

      // å¤„ç†æœç´¢
      async function handleSearch(value) {
        if (!value.trim()) return;

        try {
          loading.show(); // æ˜¾ç¤º loading

          // é‡ç½®åˆ†é¡µçŠ¶æ€
          pageState.page = 1;
          pageState.hasMore = true;
          pageState.keyword = value;
          pageState.searchType =
            customSelect.querySelector('.current-type').textContent;

          await loadOrders();
        } catch (error) {
          console.error('æœç´¢å¤±è´¥:', error);
          showToast('æœç´¢å¤±è´¥ï¼Œè¯·é‡è¯•');
        } finally {
          loading.hide(); // éšè— loading
        }
      }

      // æ·»åŠ æ»šåŠ¨ç›‘å¬
      function initScrollLoad() {
        let lastScrollTime = 0;
        const throttleDelay = 50; // èŠ‚æµå»¶è¿Ÿæ—¶é—´
        let scrollTimer = null; // æ–°å¢ï¼šç”¨äºdebounceçš„timer

        window.addEventListener('scroll', () => {
          const now = Date.now();

          // å¦‚æœæ­£åœ¨åŠ è½½æˆ–æ²¡æœ‰æ›´å¤šæ•°æ®ï¼Œç›´æ¥è¿”å›
          if (pageState.loading || !pageState.hasMore) return;

          // èŠ‚æµæ§åˆ¶
          // if (now - lastScrollTime < throttleDelay) return;
          // lastScrollTime = now;

          // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
          if (scrollTimer) clearTimeout(scrollTimer);

          // ä½¿ç”¨setTimeoutè¿›è¡Œdebounce
          scrollTimer = setTimeout(() => {
            const scrollHeight = document.documentElement.scrollHeight;
            const scrollTop =
              document.documentElement.scrollTop || document.body.scrollTop;
            const clientHeight = document.documentElement.clientHeight;

            // è·ç¦»åº•éƒ¨100pxæ—¶å¼€å§‹åŠ è½½
            if (scrollHeight - scrollTop - clientHeight < 100) {
              console.log('åŠ è½½æ›´å¤š');
              loadOrders(true);
            }
          }, 100); // 100msçš„é˜²æŠ–å»¶è¿Ÿ
        });
      }

      // åˆå§‹åŒ–æ»šåŠ¨åŠ è½½
      initScrollLoad();

      // æœç´¢ç›¸å…³äº‹ä»¶ç›‘å¬
      searchInput.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          handleSearch(this.value);
        }
      });

      searchInput.addEventListener('compositionend', function () {
        handleSearch(this.value);
      });

      // ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
      let startY = 0;
      let distance = 0;
      const threshold = 100; // ä¸‹æ‹‰é˜ˆå€¼

      document.addEventListener('touchstart', (e) => {
        const scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop;
        if (scrollTop === 0) {
          startY = e.touches[0].pageY;
        }
      });

      document.addEventListener('touchmove', (e) => {
        if (startY > 0) {
          distance = e.touches[0].pageY - startY;
          if (distance > 0 && distance < threshold) {
            // å¯ä»¥æ·»åŠ ä¸€äº›è§†è§‰åé¦ˆ
          }
        }
      });

      document.addEventListener('touchend', () => {
        if (distance >= threshold) {
          // é‡ç½®åˆ†é¡µçŠ¶æ€å¹¶é‡æ–°åŠ è½½
          pageState.page = 1;
          pageState.hasMore = true;
          pageState.keyword = '';
          loadOrders();
        }
        startY = 0;
        distance = 0;
      });

      // æ·»åŠ æ»šåŠ¨åˆ°æ¿€æ´»tabçš„åŠŸèƒ½
      const container = document.querySelector('.tab-scroll-container');
      const activeTab = document.querySelector('.tab-active');

      if (container && activeTab) {
        // è·å–å®¹å™¨çš„å·¦è¾¹è·
        const containerLeft = container.getBoundingClientRect().left;
        // è·å–æ¿€æ´»tabçš„å·¦è¾¹è·
        const activeTabLeft = activeTab.getBoundingClientRect().left;
        // è®¡ç®—éœ€è¦æ»šåŠ¨çš„è·ç¦»
        const scrollLeft =
          activeTabLeft -
          containerLeft -
          container.offsetWidth / 2 +
          activeTab.offsetWidth / 2;

        // ä½¿ç”¨å¹³æ»‘æ»šåŠ¨æ•ˆæœ
        container.scrollTo({
          left: scrollLeft,
          // behavior: 'smooth'
        });
      }

      // æ—¥æœŸé€‰æ‹©
      function showTimeModal() {
        modal.show({
          title: 'é€‰æ‹©æ—¥æœŸ',
          fields: [
            {
              type: 'date',
              label: 'å¼€å§‹æ—¥æœŸ',
              name: 'beginDate',
              required: true,
              placeholder: 'è¯·é€‰æ‹©å¼€å§‹æ—¥æœŸ',
            },
            {
              type: 'date',
              label: 'ç»“æŸæ—¥æœŸ',
              name: 'endDate',
              required: true,
              placeholder: 'è¯·é€‰æ‹©ç»“æŸæ—¥æœŸ',
            },
          ],
          onConfirm: async (formData) => {
            console.log(
              'ğŸš€ğŸš€ğŸš€ ~ file: new_order.html:904 ~ onConfirm: ~ formData:',
              formData,
            );

            try {
              // å‘è¯·æ±‚
              // await api.***({
              //   ...formData
              // });
              modal.hide();
            } catch (error) {
              console.error('æ—¥æœŸé€‰æ‹©å¤±è´¥:', error);
            }
          },
        });
        // diyDatePicker.init('#datePicker');
      }

      // è¡¥å½•è¿å•å·
      function showTrackingModal(orderId) {
        modal.show({
          title: 'è¡¥å½•è¿å•å·',
          fields: [
            {
              type: 'select',
              name: 'expressCompany',
              label: 'ç‰©æµå…¬å¸',
              required: true,
              options: [
                { value: 'sf', label: 'é¡ºä¸°' },
                { value: 'yd', label: 'éŸµè¾¾' },
                { value: 'zt', label: 'ä¸­é€š' },
              ],
            },
            {
              type: 'input',
              name: 'trackingNo',
              label: 'å¿«é€’å•å·',
              placeholder: 'è¯·è¾“å…¥å¿«é€’å•å·',
              required: true,
            },
            // {
            //   type: 'input',
            //   name: 'remark',
            //   label: 'å¤‡æ³¨',
            //   placeholder: 'è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯'
            // }
          ],
          onConfirm: async (formData) => {
            try {
              // å‘è¯·æ±‚
              // await api.***({
              //   orderId,
              //   ...formData
              // });
              if (formData.trackingNo === '1') {
                // åˆ·æ–°è®¢å•åˆ—è¡¨
                showToast('å¿«é€’å•å·è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥');
              } else {
                showToast('è¡¥å½•è¿å•å·æˆåŠŸ');
                modal.hide();
              }
            } catch (error) {
              console.error('è¡¥å½•è¿å•å·å¤±è´¥:', error);
            }
          },
        });
      }
      // ä½¿ç”¨ç¤ºä¾‹2ï¼š
      function showInterceptModal1(orderId) {
        modal.show({
          title: 'æ‹¦æˆªç™»è®°',
          fields: [
            {
              type: 'select',
              name: 'interceptReason',
              label: 'æ‹¦æˆªåŸå› ',
              required: true,
              options: [
                { value: '1', label: 'å®¢æˆ·è¦æ±‚' },
                { value: '2', label: 'åœ°å€é”™è¯¯' },
                { value: '3', label: 'å…¶ä»–åŸå› ' },
              ],
            },
            {
              type: 'input',
              name: 'contactPerson',
              label: 'è”ç³»äºº',
              required: true,
              placeholder: 'è¯·è¾“å…¥è”ç³»äººå§“å',
            },
            {
              type: 'input',
              name: 'contactPhone',
              label: 'è”ç³»ç”µè¯',
              required: true,
              placeholder: 'è¯·è¾“å…¥è”ç³»ç”µè¯',
            },
            {
              type: 'input',
              name: 'remark',
              label: 'å¤‡æ³¨è¯´æ˜',
              placeholder: 'è¯·è¾“å…¥å¤‡æ³¨è¯´æ˜',
            },
          ],
          onConfirm: async (formData) => {
            console.log(formData);
            try {
              // await api.createIntercept({
              //   orderId,
              //   ...formData
              // });
              showToast('æ‹¦æˆªç™»è®°æˆåŠŸ');
              modal.hide();
            } catch (error) {
              console.error('æ‹¦æˆªç™»è®°å¤±è´¥:', error);
            }
          },
        });
      }

      // æ‹¦æˆªç™»è®°
      function showInterceptModal() {
        const goodsHtml = `
    <div class="intercept-goods-item">
      <div class="section_6 flex-row">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <span class="text_28">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
            <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
          </div>
        </div>
    </div>
  `;

        modal.show({
          title: 'å‘èµ·æ‹¦æˆª',
          fields: [
            {
              type: 'html',
              html: `
      <div class="intercept-modal-content">
        ${goodsHtml}
      </div>
    `,
            },
          ],
          onConfirm: async (formData) => {
            try {
              // è¿™é‡Œæ·»åŠ æ‹¦æˆªç™»è®°çš„APIè°ƒç”¨
              // await api.createIntercept(formData);
              showToast('æ‹¦æˆªç™»è®°æˆåŠŸ');
              modal.hide();
            } catch (error) {
              console.error('æ‹¦æˆªç™»è®°å¤±è´¥:', error);
            }
          },
        });
      }

      //ç¡®è®¤æ ¸é”€

      function showWriteOffModal() {
        const goodsHtml = `
    <div class="intercept-goods-item flex-col verify-box">
 <div class="list-item verify-info">
        <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">è®¢å•å·ï¼š</span>
          <span class="text_12">6942287127788887</span>
        </div>
         <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">é—¨åº—ï¼š</span>
          <span class="text_12">ä¸Šæµ·DESCEMTE</span>
        </div>
         <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">æ¸ é“ï¼š</span>
          <span class="text_12">æŠ–éŸ³</span>
        </div>
         <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">å‘ç¥¨å•å·ï¼š</span>
          <span class="text_12">2542287127788887</span>
        </div>
         <div class="text-wrapper_5 flex-row justify-between">
          <span class="text_11">ä¸‹å•æ—¶é—´ï¼š</span>
          <span class="text_12">2025-05-07 18:22:22</span>
        </div>
      </div>
      <div class="verify-good-box">
         <div class="section_6 flex-row verify-good">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <span class="text_28">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
            <span class="text_29">å•†æˆ·è´§å·ï¼š787876756454</span>
            <span class="text_29">å­è®¢å•å·ï¼š69422787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
          </div>
        </div>
      </div>

        <div class="section_6 flex-wrap verify-price">
            <div class="mrg-side-4">
              <span class="text_36">ä¹°å®¶</span
              ><span class="text_37">ï¿¥790.23</span>
            </div>
            <div class="mrg-side-4">
              <span class="text_36">ä¼˜æƒ </span
              ><span class="text_37">ï¿¥0.00</span>
            </div>
            <div class="mrg-side-4">
              <span class="text_36">å•†å®¶</span
              ><span class="text_37">ï¿¥1000.23</span>
            </div>
          </div>


    </div>
  `;

        modal.show({
          title: 'è®¢å•æ ¸é”€',
          confirmText: 'ç¡®è®¤æ ¸é”€',
          cancelText: 'è¿”å›',
          isShowCancleBtn: true,
          fields: [
            {
              type: 'html',
              html: `
      <div class="intercept-modal-content">
        ${goodsHtml}
      </div>
    `,
            },
            {
              type: 'input',
              name: 'code',
              label: '',
              placeholder: 'è¯·è¾“å…¥æ ¸é”€ç ',
              className: 'verify-input',
              required: false,
            },
          ],
          onConfirm: async (formData) => {
            const { code } = formData;
            if (!code) {
              showToast('è¯·å¡«å†™æ ¸é”€ç ');
              return
            }
            try {
              // è¿™é‡Œæ·»åŠ æ‹¦æˆªç™»è®°çš„APIè°ƒç”¨
              // await api.createIntercept(formData);
              showToast('æ ¸é”€æˆåŠŸ');
              modal.hide();
            } catch (error) {
              console.error('æ ¸é”€å¤±è´¥:', error);
            }
          },
          onCancel: async (formData) => {
            modal.hide();
          },
        });
      }

      // ç¡®è®¤å‘è´§
      function showSendModal() {
        const goodsHtml = `
    <div class="intercept-goods-item">
      <div class="section_6 flex-row">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <span class="text_28">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
            <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
          </div>
        </div>
    </div>
    <div class="intercept-goods-item">
      <div class="section_6 flex-row">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <span class="text_28">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
            <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
          </div>
        </div>
    </div>
  `;
        modal.show({
          title: 'ç¡®è®¤å‘è´§',
          fields: [
            {
              type: 'html',
              html: `
      <div class="intercept-modal-content">
        ${goodsHtml}
      </div>
    `,
            },
          ],
          onConfirm: async (formData) => {
            try {
              // è¿™é‡Œæ·»åŠ æ‹¦æˆªç™»è®°çš„APIè°ƒç”¨
              // await api.createIntercept(formData);
              showToast('ç¡®è®¤å‘è´§æˆåŠŸ');
              modal.hide();
            } catch (error) {
              console.error('ç¡®è®¤å‘è´§å¤±è´¥:', error);
            }
          },
        });
      }

      // å”®åç”³è¯· æ‹’ç»å¼¹çª—
      function showAfterSaleModal() {
        modal.show({
          title: 'å”®åç”³è¯·',
          confirmText: 'æ‹’ç»',
          fields: [
            {
              type: 'html',
              html: `
              <div class="intercept-modal-content">
                <div class="intercept-modal-content__html">ç”¨æˆ·é€€æ¬¾ç†ç”±ï¼šå°ºç ä¸åˆé€‚ã€‚</div>
              </div>
            `,
            },
            {
              type: 'textarea',
              name: 'refuseResult',
              label: 'æ‹’ç»ç†ç”±',
              placeholder: 'è¯·å¡«å†™æ‹’ç»åŸå› ',
              required: true,
            },
            {
              type: 'image',
              name: 'refuseImage',
              label: 'æ‹’ç»ç†ç”±å›¾ç‰‡',
              required: true,
            },
          ],

          onConfirm: async (formData) => {
            console.log('ğŸš€ğŸš€ğŸš€ ~ onConfirm: ~ formData:', formData);
            // åˆ›å»ºFormDataå¯¹è±¡
            const formDataObj = new FormData();

            // æ·»åŠ æ‹’ç»ç†ç”±
            formDataObj.append('refuseResult', formData.refuseResult);

            // æ·»åŠ å›¾ç‰‡æ•°æ®
            formData.refuseImage.forEach((base64, index) => {
              // å°†base64è½¬æ¢ä¸ºblob
              const byteString = atob(base64.split(',')[1]);
              const mimeString = base64
                .split(',')[0]
                .split(':')[1]
                .split(';')[0];
              const ab = new ArrayBuffer(byteString.length);
              const ia = new Uint8Array(ab);
              for (let i = 0; i < byteString.length; i++) {
                ia[i] = byteString.charCodeAt(i);
              }
              const blob = new Blob([ab], { type: mimeString });

              // éªŒè¯Blobæ˜¯å¦æœ‰æ•ˆ
              if (blob.size === 0) {
                console.error('Blobæ— æ•ˆï¼Œæ— æ³•åˆ›å»ºURL');
                return; // å¦‚æœBlobæ— æ•ˆï¼Œç»ˆæ­¢å½“å‰å¾ªç¯
              }

              // åˆ›å»ºObject URLå¹¶éªŒè¯
              const objectUrl = URL.createObjectURL(blob);
              const img = new Image();
              img.onload = () => {
                console.log(`BlobéªŒè¯æˆåŠŸ: ${objectUrl}`);
                // åœ¨é¡µé¢ä¸­æ˜¾ç¤ºå›¾åƒ
                URL.revokeObjectURL(objectUrl); // é‡Šæ”¾URLå¯¹è±¡
              };
              img.onerror = () => {
                console.error('BlobéªŒè¯å¤±è´¥ï¼Œæ— æ³•åŠ è½½å›¾åƒ');
              };
              img.src = objectUrl; // å°è¯•åŠ è½½Blob

              // æ·»åŠ åˆ°FormData
              formDataObj.append(`refuseImage[${index}]`, blob);
            });

            // æ›¿æ¢åŸformData
            formData = formDataObj;
            // console.log("ğŸš€ğŸš€ğŸš€ ~ onConfirm: ~ formData2:", formData)

            request({
              url: '/', // æäº¤å”®åç”³è¯·å®¡æ ¸api
              method: 'post',
              data: formData,
              headers: {
                'Content-Type': 'multipart/form-data',
              },
            });
            // æ‹’ç»
            showToast('å”®åç”³è¯·æ‹’ç»æˆåŠŸ');
            modal.hide();
          },
        });
      }

      // å”®åç”³è¯·
      function showReturnModal() {
        const goodsHtml = `
    <div class="intercept-goods-item">
      <div class="section_6 flex-row">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <span class="text_28">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
            <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
          </div>
        </div>
    </div>
    <div class="intercept-goods-item">
      <div class="section_6 flex-row">
          <img class="image_2" referrerpolicy="no-referrer"
            src="https://lanhu-oss.lanhuapp.com/SketchPng347d1d203f86e105cbef42b744b03da47241ba9d50ca664284da54791756c794" />
          <div class="text-group_1 flex-col">
            <span class="text_28">MAX&nbsp;MARAå¥³å£«è–„æ¬¾å…¨ç¾Šæ¯›LOGOå›´å·¾&nbsp;ç»¿è‰²</span>
            <span class="text_29">å•†å“è´§å·ï¼š787876756454</span>
            <span class="text_30">1ä»¶ï¼›é¢œè‰²ï¼šç»¿è‰²ï¼›å°ºå¯¸ï¼šM</span>
          </div>
        </div>
    </div>
  `;
        modal.show({
          title: 'å”®åç”³è¯·2',
          confirmText: 'åŒæ„æ¢è´§',
          cancelText: 'æ‹’ç»æ¢è´§',
          isShowCancleBtn: true,
          fields: [
            {
              type: 'html',
              html: `
      <div class="intercept-modal-content">
        ${goodsHtml}
      </div>
    `,
            },
          ],
          onConfirm: async (formData) => {
            try {
              // è¿™é‡Œæ·»åŠ æ‹¦æˆªç™»è®°çš„APIè°ƒç”¨
              // await api.createIntercept(formData);
              showToast('åŒæ„æ¢è´§æˆåŠŸ');
              modal.hide();
            } catch (error) {
              console.error('ç¡®è®¤å‘è´§å¤±è´¥:', error);
            }
          },
          onCancel: (formData) => {
            modal.hide();
            // æ‹’ç»
            showAfterSaleModal();
          },
        });
      }

      // æ·»åŠ  loading æ§åˆ¶å‡½æ•°
      const loading = {
        show(isBottom = false) {
          if (isBottom) {
            // å¦‚æœæ˜¯åº•éƒ¨åŠ è½½æ›´å¤šï¼Œæ˜¾ç¤ºåœ¨åˆ—è¡¨åº•éƒ¨
            const loadingMore = document.createElement('div');
            loadingMore.className = 'loading-more';
            loadingMore.innerHTML = 'åŠ è½½ä¸­...';
            document.querySelector('.section_4').appendChild(loadingMore);
          } else {
            // å±…ä¸­æ˜¾ç¤ºçš„ loading
            document.querySelector('.loading-container').style.display = 'flex';
          }
        },
        hide() {
          document.querySelector('.loading-container').style.display = 'none';
          const loadingMore = document.querySelector('.loading-more');
          if (loadingMore) {
            loadingMore.remove();
          }
        },
      };
    </script>
  </body>
</html>
